var err_msg01="Tên đăng nhập không được để trống.";var err_msg02="Tên đăng nhập phải có độ dài tối thiểu 6 ký tự, không chứa dấu cách và các ký tự đặc biệt.";var err_msg03="Mật khẩu không được để trống.";var err_msg04="Mật khẩu phải có độ dài tối thiểu 6 ký tự.";var err_msg05="Xác thực mật khẩu không đúng.";var err_msg051="Xác thực mật khẩu không được để trống.";var err_msg06="Địa chỉ email không được để trống.";var err_msg07="Địa chỉ email không hợp lệ.";var err_msg08="Tên không được để trống.";var err_msg09="Số điện thoại bàn bạn nhập có chứa ký tự không phải số.";var err_msg10="Số điện thoại di động không được để trống.";var err_msg11="Số điện thoại di động bạn nhập có chứa ký tự không phải định dạng số.";var err_msg12="Số điện thoại di động bạn nhập không tồn tại. Độ dài tối thiểu số di động là 10 số.";var err_msg13="Tên đăng nhập không hợp lệ. Tên đăng nhập phải có độ dài tối thiểu 6 ký tự, có thể chứa dấu gạch ngang hoặc gạch chân (_) nhưng không chứa dấu cách và các ký tự đặc biệt.";var err_msg14="Mã an toàn không được để trống.";var err_msg15="Mật khẩu phải chưa ít nhất 1 ký tự viết hoa";var err_msg16="Mật khẩu phải chứa ít nhất 1 chữ số";var err_msg17="Mật khẩu phải chứa ít nhất 1 ký tự đặc biệt (!@#$%&_+,.)";var err_msg18="Mật khẩu phải có độ dài từ 6 ký tự, bao gồm ít nhất 1 ký tự viết hoa và 1 chữ số.";var msg01="Tên đăng nhập có thể sử dụng.";var msg02="Tên đăng nhập đã được đăng ký.";var msg03="Email có thể sử dụng.";var msg04="Email của bạn đã được sử dụng. <span style='font-style:italic; font-size:9pt;'>( Có thể bạn đã từng đăng ký tài khoản trước đó, hoặc đã từng đăng nhập vào hệ thống của chúng tôi bằng email này thông qua Google hoặc Yahoo hoặc Facebook. Bạn vui lòng sử dụng chức năng <a href='https://batdongsan.com.vn/lay-lai-mat-khau'>lấy lại mật khẩu</a> cho tài khoản tướng ứng với email này )</span>";var msg05="Số điện thoại di động có thể sử dụng.";var msg06="Số điện thoại di động đã được sử dụng.";var msg07="Số điện thoại di động không đúng định dạng.";var isUserNameValid=true;var isEmailValid=true;$(document).ready(function(){$("#txtBirthDate").datepicker({dateFormat:"dd/mm/yy",changeMonth:true,changeYear:true,yearRange:"-90:-16",defaultDate:"dd/mm/-40yy"});$("#txtBirthDate").keydown(function(a){if(a.keyCode==9||a.which==9){return true}else{return false}});$("#ddlCities").change(function(){var a=$(this).val();bindDistrict(a)});$("#ddlDistricts").change(function(){var a=$(this).val();bindWard(a);SetTextDrop()});$("#ddlWards").change(function(){SetTextDrop()});$("#txtUserName").change(function(){checkUserName($(this),$(this).val())});$("#txtPrimaryEmail").change(function(){checkEmail($(this),$(this).val())});$("#txtPassword").change(function(){checkPassword($(this),$(this).val())});$("#txtConfirmPassword").change(function(){checkConfirmPassword($(this),$(this).val())});$("#txtCaptchaToCheck").change(function(){checkCaptcha($(this),$(this).val())});$("#txtFullname").change(function(){checkFullName($(this),$(this).val())});SupportPlaceholder($("#txtFullname,#txtCaptchaToCheck,#txtConfirmPassword,#txtPassword,#txtPrimaryEmail,#txtUserName,#txtBirthDate"));$("#txtUserName").focus();$("input,textarea").keydown(function(a){var b=a.which?a.which:a.keyCode;if(a.shiftKey&&(b==188||b==190)){a.stopImmediatePropagation();a.stopPropagation();return false}else{return true}})});function SupportPlaceholder(a){var c=window.navigator.userAgent;var b=c.indexOf("MSIE ");if(b>0){a.each(function(){$(this).click(function(){if($(this).val()==$(this).attr("placeholder")){$(this).val("")}else{$(this).select()}});$(this).keydown(function(){if($(this).val()===$(this).attr("placeholder")){$(this).val("")}});$(this).blur(function(){if($(this).val()==""){$(this).val($(this).attr("placeholder"))}});if($(this).val().length==0){$(this).val($(this).attr("placeholder"))}})}}function bindDistrict(a){$("#ddlWards").find("option").remove();$("#ddlWards").append('<option value="0">Phường/Xã</option>');$("#ddlDistricts").find("option").remove();$("#ddlDistricts").append('<option value="0">Quận/Huyện</option>');var b="https://content.batdongsan.com.vn/HandlerWeb/AddressHandler.ashx?type=district&code="+a;if(isIE()=="9"||isIE()=="8"||isIE()=="7"||isIE()=="6"){b="/HandlerWeb/AddressHandler.ashx?type=district&code="+a}$.get(b,function(c){if(c!=null){$.each(c,function(d,e){$("#ddlDistricts").append('<option value="'+e.id+'">'+e.name+"</option>")})}});SetTextDrop()}function bindWard(a){$("#ddlWards").find("option").remove();$("#ddlWards").append('<option value="0">Phường/Xã</option>');var b="https://content.batdongsan.com.vn/HandlerWeb/AddressHandler.ashx?type=ward&code="+a;if(isIE()=="9"||isIE()=="8"||isIE()=="7"||isIE()=="6"){b="/HandlerWeb/AddressHandler.ashx?type=ward&code="+a}$.get(b,function(c){if(c!=null){$.each(c,function(d,e){$("#ddlWards").append('<option value="'+e.id+'">'+e.name+"</option>")})}})}function SetTextDrop(){var a=$(".adv-control select").length;for(var b=0;b<a;b++){$(".adv-control select").eq(b).parent().find(".select-text-content").text($(".adv-control select").eq(b).find("option:selected").text())}}function isValid(){try{var j=true;var l=$("#txtUserName");var m=$("#txtUserName").val().trim();var h=$("#txtPassword");var i=$("#txtPassword").val().trim();var a=$("#txtConfirmPassword");var b=$("#txtConfirmPassword").val().trim();var c=$("#txtPrimaryEmail");var d=$("#txtPrimaryEmail").val().trim();var f=$("#txtFullname");var g=$("#txtFullname").val().trim();var k=$("#txtCaptchaToCheck");if(isUserNameValid==false){j=false}else{if(m.length===0||l.attr("placeholder")==m){j=false;addErrorMessage(l,err_msg01)}else{if(!isUserName(m)){j=false;addErrorMessage(l,err_msg13)}else{removeErrorMessage(l)}}}if(checkPassword(h,i)==false){j=false}if(checkConfirmPassword(a,b)==false){j=false}if(isEmailValid==false){j=false}else{if(d.length===0||c.attr("placeholder")==d){j=false;addErrorMessage(c,err_msg06)}else{if(isEmail(d)==false){j=false;addErrorMessage(c,err_msg07)}else{removeErrorMessage(c)}}}if(checkFullName(f,g)==false){j=false}if(checkCaptcha(k,k.val())==false){j=false}if(!j){$("html, body").animate({scrollTop:0},"slow")}return j}catch(e){console.log(e);return false}}function checkFullName(a,c){var b=false;if(c.length===0||a.attr("placeholder")==c){addErrorMessage(a,err_msg08)}else{removeErrorMessage(a);b=true}return b}function checkUserName(a,c){if(c.length===0||a.attr("placeholder")==c){addErrorMessage(a,err_msg01)}else{if(!isUserName(c)){addErrorMessage(a,err_msg13)}else{var b="/HandlerWeb/UserHandler.ashx?type=checkDuplicateUsername&username="+c;if(isIE()=="9"||isIE()=="8"||isIE()=="7"||isIE()=="6"){b="/HandlerWeb/UserHandler.ashx?type=checkDuplicateUsername&username="+c}$.get(b,function(d){if(d=="true"){addValidMessage(a,msg02);isUserNameValid=true}else{addErrorMessage(a,msg01);isUserNameValid=false}})}}}function checkEmail(b,a){if(a.length===0||b.attr("placeholder")==a){addErrorMessage(b,err_msg06)}else{if(!isEmail(a)){addErrorMessage(b,err_msg07)}else{var c="/HandlerWeb/UserHandler.ashx?type=checkduplicateemail&email="+a;if(isIE()=="9"||isIE()=="8"||isIE()=="7"||isIE()=="6"){c="/HandlerWeb/UserHandler.ashx?type=checkduplicateemail&email="+a}$.get(c,function(d){if(d=="true"){addValidMessage(b,msg03);isEmailValid=true}else{addErrorMessage(b,msg04);isEmailValid=false}})}}}function checkPassword(a,b){var e=false;var d=/[A-Z]/g;var c=/[0-9]/g;if(b.length===0||a.attr("placeholder")==b){addErrorMessage(a,err_msg03)}else{if(b.length<6||d.test(b)==false||c.test(b)==false){addErrorMessage(a,err_msg18)}else{removeErrorMessage(a);e=true}}return e}function checkConfirmPassword(b,a){var d=false;var c=$("#txtPassword").val();if(a.length===0||b.attr("placeholder")==a){addErrorMessage(b,err_msg051)}else{if(c.length&&a!=c){addErrorMessage(b,err_msg05)}else{removeErrorMessage(b);d=true}}return d}function checkCaptcha(a,c){var b=false;if(c.length===0||a.attr("placeholder")==c){addErrorMessage(a,err_msg14)}else{removeErrorMessage(a);b=true}return b}function addErrorMessage(d,c){var a="";var b=$(d).attr("id");$("#validateFor"+b).html(c);$("#validateFor"+b).show();$("#validateFor"+b).removeClass("available");$("#validateFor"+b).addClass("error-message");$(d).next().removeClass("fa-check");$(d).next().addClass("fa-exclamation-triangle")}function removeErrorMessage(b){var a=$(b).attr("id");$("#validateFor"+a).hide();$(b).next().removeClass("fa-exclamation-triangle");$(b).next().addClass("fa-check");$("#validateFor"+a).removeClass("error-message");$("#validateFor"+a).addClass("available")}function addValidMessage(c,b){var a=$(c).attr("id");$("#validateFor"+a).html(b);$("#validateFor"+a).removeClass("error-message");$("#validateFor"+a).addClass("available");$("#validateFor"+a).show();$(c).next().removeClass("fa-exclamation-triangle");$(c).next().addClass("fa-check")}function isEmail(a){var b=/^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;return b.test(a)}function isUserName(b){var a=/^[a-zA-Z0-9-_]{6,24}$/;return a.test(b)}function isPhoneNumber(b){var a=/^\d+$/;return a.test(b)}function isMessageIm(b){var a=/^$/;return a.test(email)};