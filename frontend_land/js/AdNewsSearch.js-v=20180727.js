var ProductType={NeedBuyNeedRent:-1,NeedForBuy:400,NeedForRent:401};___isIE=/MSIE (\d+\.\d+);/.test(navigator.userAgent);var cityList=[];var hdbCategory=$("#divCategory").AdvanceHiddenDropbox({id:"divCatagoryOptions",hddValue:"hdCboCatagory"});var hdbCategoryRe=$("#divCategoryRe").AdvanceHiddenDropbox({id:"divCatagoryReOptions",hddValue:"hdCboCatagoryRe"});var hdbDistrict=$("#divDistrict").AdvanceHiddenDropbox({id:"divDistrictOptions",hddValue:"hdCboDistrict"});var hdbCity=$("#divCity").AdvanceHiddenDropbox({id:"divCityOptions",hddValue:"hdCboCity"});var hdbWard=$("#divWard").AdvanceHiddenDropbox({id:"divWardOptions",hddValue:"hdCboWard"});var hdbStreet=$("#divStreet").AdvanceHiddenDropbox({id:"divStreetOptions",hddValue:"hdCboStreet"});var hdbProject=$("#divProject").AdvanceHiddenDropbox({id:"divProjectOptions",hddValue:"hdCboProject"});var hdbPrice;var hdbArea;function ChangeClassName(a,c){var d=document.getElementById(a).getElementsByTagName("div");if(c==true){for(var b=0;b<d.length;b++){if(d[b].className=="tabLeftInAct"){d[b].className="tabLeftAct"}else{if(d[b].className=="tabCenterInAct"){d[b].className="tabCenterAct"}else{if(d[b].className=="tabRightInAct"){d[b].className="tabRightAct"}}}}}else{for(var b=0;b<d.length;b++){if(d[b].className=="tabLeftAct"){d[b].className="tabLeftInAct"}else{if(d[b].className=="tabCenterAct"){d[b].className="tabCenterInAct"}else{if(d[b].className=="tabRightAct"){d[b].className="tabRightInAct"}}}}}}function DisplaySearchAdvanceHome(){}function DisplaySearchAdvance(){if($("#lblSearch").text()=="Bỏ tìm kiếm nâng cao"){$("#lblSearch").text("Tìm kiếm nâng cao");$("#adv-search").css("display","none");$("#adv-search select").prop("selectedIndex",0)}else{$("#lblSearch").text("Bỏ tìm kiếm nâng cao");$("#adv-search").css("display","block")}}function ChangeCategory(e,f){var b='<li class="advance-options" vl="0">--Chọn loại nhà đất--</li>';if(e!=ProductType.NeedBuyNeedRent){for(var c=0;c<cateList.length;c++){if(cateList[c].id==e){var a=cateList[c].children;for(var d=0;d<a.length;d++){b+='<li class="advance-options" vl="'+a[d].id+'">'+a[d].name+"</li>"}break}}}hdbCategoryRe.UpdateOptions(b);if(typeof(f)=="undefined"){hdbCategoryRe.SetValue(0)}else{hdbCategoryRe.SetValue(f)}}function SortByID(c,d){return c.id>d.id?1:-1}function SortByOrder(c,d){return c.order>d.order?1:-1}function SortByName(c,d){return c.name>d.name?1:-1}LocationControl=function(a){if(a.city!=null){this.cboCity=a.city;this.cboCity.BindChangeEvent(this,this.ChangeCity)}else{this.cboCity=null}if(a.distr!=null){this.cboDistr=a.distr;this.cboDistr.BindChangeEvent(this,this.ChangeDistrict);if(___isIE==false){this.cboDistr.bt("Chọn Tỉnh/Thành phố để hiện ra danh sách quận/huyện",{trigger:"hover",positions:a.toolTipPosition,width:"170px",fill:"#ffff99",offsetParent:"body",showTip:function(b){if(a.city.GetValue()=="CN"){$(b).show()}else{$(b).hide()}}})}}else{this.cboDistr=null}if(a.ward!=null){this.cboWard=a.ward;this.cboWard.BindChangeEvent(this,this.ChangeWard);if(___isIE==false){this.cboWard.bt("Chọn Quận/Huyện để hiện ra danh sách phường/xã",{trigger:"hover",positions:a.toolTipPosition,width:"170px",fill:"#ffff99",offsetParent:"body",showTip:function(b){if(a.distr.GetValue()=="0"){$(b).show()}else{$(b).hide()}}})}}else{this.cboWard=null}if(a.street!=null){this.cboStreet=a.street;this.cboStreet.BindChangeEvent(this,this.ChangeStreet);if(___isIE==false){this.cboStreet.bt("Chọn Quận/Huyện phố để hiện ra danh sách đường/phố",{trigger:"hover",positions:a.toolTipPosition,width:"170px",fill:"#ffff99",offsetParent:"body",showTip:function(b){if(a.distr.GetValue()=="0"){$(b).show()}else{$(b).hide()}}})}}else{this.cboStreet=null}if(a.project!=null){this.cboProject=a.project;this.cboProject.BindChangeEvent(this,this.ChangeProject);if(___isIE==false){this.cboProject.bt("Chọn Quận/Huyện để hiện ra danh sách dự án",{trigger:"hover",positions:a.toolTipPosition,width:"170px",fill:"#ffff99",offsetParent:"body",showTip:function(b){if(a.distr.GetValue()=="0"){$(b).show()}else{$(b).hide()}}})}}else{this.cboProject=null}};function dynamicSort(a){var b=1;if(a[0]==="-"){b=-1;a=a.substr(1)}return function(c,d){var e=(c[a]<d[a])?-1:(c[a]>d[a])?1:0;return e*b}}LocationControl.prototype.ChangeCity=function(a){var b=a;if(b.cboCity!=null){var c=b.cboCity.GetValue();var d='<li vl="0" class="advance-options">--Chọn Quận/Huyện--</li>';var e='<li vl="0" class="advance-options">--Chọn dự án--</li>';var f='<li vl="0" class="advance-options">--Chọn Đường/Phố--</li>';var h=[],m=[],n=[];var o=[];for(var k=0;k<cityList.length;k++){if(cityList[k].code==c){h=cityList[k].district;for(var p=0;p<h.length;p++){h[p].order=h[p].id;if(c=="HN"){if(h[p].id==718){h[p].order=15}else{if(h[p].id>15){h[p].order=h[p].id+1}}}}h=h.sort(SortByOrder);break}}for(var k=0;k<h.length;k++){d+="<li vl='"+h[k].id+'\' class="advance-options">'+h[k].name+"</li>";m=h[k].project;for(var l=0;l<m.length;l++){o.push(m[l])}n=h[k].street;n=n.sort(SortByID);for(var l=0;l<n.length;l++){f+="<li vl='"+n[l].id+'\' class="advance-options">'+n[l].name+"</li>"}}o.sort(dynamicSort("name"));for(var l=0;l<o.length;l++){e+="<li vl='"+o[l].id+'\' class="advance-options">'+o[l].name+"</li>"}if(b.cboDistr!=null){b.cboDistr.UpdateOptions(d);b.cboDistr.SetValue(0)}if(b.cboProject!=null){b.cboProject.UpdateOptions(e);b.cboProject.SetValue(0)}if(b.cboStreet!=null){b.cboStreet.UpdateOptions(f);b.cboStreet.SetValue(0)}if(b.cboWard!=null){var g='<li vl="0" class="advance-options">--Chọn Phường/Xã--</li>';b.cboWard.UpdateOptions(g);b.cboWard.SetValue(0)}}};LocationControl.prototype.ChangeDistrict=function(a){var b=a;if(b.cboCity!=null&&b.cboDistr!=null){var c=b.cboCity.GetValue();var g=b.cboDistr.GetValue();var f='<li vl="0" class="advance-options">--Chọn Phường/Xã--</li>';var d='<li vl="0" class="advance-options">--Chọn dự án--</li>';var e='<li vl="0" class="advance-options">--Chọn Đường/Phố--</li>';var n=[],l=[],m=[];for(var h=0;h<cityList.length;h++){if(cityList[h].code==c){for(var k=0;k<cityList[h].district.length;k++){if(cityList[h].district[k].id==g){l=cityList[h].district[k].project;n=cityList[h].district[k].ward;m=cityList[h].district[k].street;break}}}}m=m.sort(SortByID);n=n.sort(SortByName);if(b.cboProject!=null){for(var k=0;k<l.length;k++){d+="<li vl='"+l[k].id+'\' class="advance-options">'+l[k].name+"</option>"}b.cboProject.UpdateOptions(d);b.cboProject.SetValue(0)}if(b.cboStreet!=null){for(var k=0;k<m.length;k++){e+="<li vl='"+m[k].id+"'>"+m[k].name+"</li>"}b.cboStreet.UpdateOptions(e);b.cboStreet.SetValue(0)}if(b.cboWard!=null){for(var k=0;k<n.length;k++){f+="<li vl='"+n[k].id+"'>"+n[k].name+"</li>"}b.cboWard.UpdateOptions(f);b.cboWard.SetValue(0)}}};LocationControl.prototype.ChangeWard=function(){};LocationControl.prototype.ChangeStreet=function(){};LocationControl.prototype.ChangeProject=function(){};LocationControl.prototype.ChangeLocation=function(a){if(a.city!=null){this.cboCity.SetValue(a.city);this.ChangeCity(this)}if(a.distr!=null){this.cboDistr.SetValue(a.distr);this.ChangeDistrict(this)}if(a.wardid!=null){this.cboWard.SetValue(a.wardid);this.ChangeWard(this)}if(a.streetid!=null){this.cboStreet.SetValue(a.streetid);this.ChangeStreet(this)}if(a.projid!=null){this.cboProject.SetValue(a.projid);this.ChangeProject(this)}};function GetPrices(a){var d=[];if(a==ProductType.NeedForBuy){d=priceLevel[0]}else{if(a==ProductType.NeedForRent){d=priceLevel[1]}}var b='<li vl="-1" class="advance-options">--Chọn mức giá--</li>';for(var c=0;c<d.length;c++){b+='<li vl="'+d[c].Name+'" class="advance-options">'+d[c].Value+"</li>"}hdbPrice.UpdateOptions(b)}function sortDropDownListByText(b){var a=$("#"+b+" option:first");var c=$("#"+b+" option:not(:first)").sort(function(d,e){return d.text==e.text?0:d.text<e.text?-1:1});$("#"+b).html(c).prepend(a)}SearchModeControl=new function(){this.isAdvance=false;this.ChangeMode=function(a){if(a!=undefined){this.isAdvance=a}if(this.isAdvance==false){$("#lblSearch").removeClass("advance");$("#lblSearch").text("Tìm nâng cao");$("#searchArea").css("overflow","hidden");$(".adv-search").css("display","none");$("#home-advsearch select").prop("selectedIndex",0);this.isAdvance=true}else{$("#lblSearch").addClass("advance");$("#lblSearch").text("Bỏ tìm nâng cao");$("#searchArea").css("overflow","auto");$(".adv-search").css("display","block");this.isAdvance=false}}};$(function(){hdbPrice=$("#divPrice").AdvanceHiddenDropbox({id:"divPriceOptions",minValue:"txtPriceMinValue",maxValue:"txtPriceMaxValue",unit:"money",lblMin:"lblPriceMin",lblMax:"lblPriceMax",hddValue:"hdCboPrice"});hdbArea=$("#divArea").AdvanceHiddenDropbox({id:"divAreaOptions",minValue:"txtAreaMinValue",maxValue:"txtAreaMaxValue",unit:"area",hddValue:"hdCboArea"});$(".adv-search select").each(function(){if(SearchModeControl.isAdvance==false){var b=$(this).val();if(b!="0"&&b!="-1"){SearchModeControl.ChangeMode()}}});$("#lblSearch").click(function(){SearchModeControl.ChangeMode()});if(cityList.length==0){if(typeof cityListOTher1!="undefined"){cityList=$.merge(cityList,cityListOTher1)}if(typeof cityListOTher2!="undefined"){cityList=$.merge(cityList,cityListOTher2)}if(typeof cityListOTher3!="undefined"){cityList=$.merge(cityList,cityListOTher3)}if(typeof cityListOTher4!="undefined"){cityList=$.merge(cityList,cityListOTher4)}}if(hdbCategory!=null){hdbCategory.BindChangeEvent(hdbCategory,function(b){ChangeCategory(b.GetValue());GetPrices(b.GetValue());hdbPrice.UpdateTextValue()})}var a=window.location.pathname=="/"?"right":"left";_locationProduct=new LocationControl({city:hdbCity,distr:hdbDistrict,project:hdbProject,ward:hdbWard,street:hdbStreet,toolTipPosition:a});if((hdbWard!=null&&hdbStreet!=null&&hdbProject!=null)&&(hdbWard.GetValue()!="0"||hdbStreet.GetValue()!="0"||hdbProject.GetValue()!="0")){SearchModeControl.ChangeMode(true)}else{SearchModeControl.ChangeMode(false)}});var cnt=0;$(".home-product-search").keyup(function(a){if(a.keyCode==13&&cnt>0){cnt=0;$(".timkiems").find("#btnSearch").click()}else{if(a.keyCode==13){cnt++}}});$("#product_search").keyup(function(a){if(a.keyCode==13&&cnt>0){cnt=0;$("#btnSearchContext").click()}else{if(a.keyCode==13){cnt++}}});