(function(a){AdvanceDropboxCustom=function(c){var b=a(this);if(b.length==0){return null}this.Value=a("#"+c.hddValue);this.divOptions=a("#"+c.id);this.divOptions.children("ul").css("min-width",b.width()+"px");this.divOptions.children("ul").children("li").css("min-width",(b.width()-32)+"px");if(this.divOptions.children("ul").height()>300){this.divOptions.css("width",(b.width()+22)+"px")}if(this.divOptions.width()<b.width()){this.divOptions.css("width",b.width()+"px")}if(c.minValue!=undefined){this.txtMinValue=a("#"+c.minValue)}else{this.txtMinValue=null}if(c.maxValue!=undefined){this.txtMaxValue=a("#"+c.maxValue)}else{this.txtMaxValue=null}this.lstValue=this.divOptions.children("ul").children();this.selectText=b.children(".select-text");this.selectText.children().css("width",(this.selectText.width()-25)+"px");if(c.unit!=undefined){this.unitPrice=c.unit}else{this.unitPrice=null}this.minValue=0;this.maxValue=0;function d(h,i){var f=i.keyCode?i.keyCode:i.which;if(f==13){i.data.CheckToClose();i.preventDefault()}else{var g=a(h).attr("decimal")=="true";var j=numbersonly(h,i,g);if(j==false){i.preventDefault()}}}function e(f,g){g.data.UpdateTextValue();var h=a(f).val();if(a(f).attr("id")==c.minValue){g.data.minValue=parseFloat(h)}else{g.data.maxValue=parseFloat(h)}g.data.Value.val("")}if(this.txtMinValue!=null){this.txtMinValue.bind("keydown",this,function(f){d(this,f)});this.txtMinValue.bind("keyup",this,function(f){e(this,f)})}if(this.txtMaxValue!=null){this.txtMaxValue.bind("keydown",this,function(f){d(this,f)});this.txtMaxValue.bind("keyup",this,function(f){e(this,f)})}this.selectText.bind("click",this,function(f){f.preventDefault();if(f.data.divOptions.parent().prop("tagName")!="form"){f.data.divOptions.appendTo("form")}if(f.data.divOptions.css("display")=="none"){a(".advance-select-options").css("display","none");var g=a(f.data).offset();f.data.divOptions.css("top",(g.top+b.height())+"px");f.data.divOptions.css("left",g.left+"px");f.data.divOptions.css("display","block");f.data.lstValue.removeClass("current");if(f.data.Value.val().length>0&&(f.data.txtMaxValue==null||f.data.txtMaxValue.val().length==0)&&(f.data.txtMinValue==null||f.data.txtMinValue.val().length==0)){f.data.divOptions.children("ul").children("[vl="+f.data.Value.val()+"]").addClass("current")}if(f.data.txtMinValue!=null){f.data.txtMinValue.focus()}a("body").bind("click",f.data,function(h){if(a(h.target).hasClass("advance-options")){h.preventDefault();h.stopPropagation()}else{if(a(h.target).hasClass("select-text-content")){return}else{h.data.CheckToClose()}}})}else{f.data.divOptions.css("display","none")}});this.CheckToClose=function(){if(this.txtMaxValue!=null&&this.txtMinValue!=null&&this.txtMaxValue.val().length>0&&this.txtMinValue.val().length>0&&this.minValue>=this.maxValue){var g=parseFloat(this.txtMinValue.val());var f=parseFloat(this.txtMaxValue.val());if(f<g){var h=this.txtMaxValue.val();this.txtMaxValue.val(this.txtMinValue.val());this.txtMinValue.val(h);this.UpdateTextValue()}}this.divOptions.css("display","none");a("body").unbind("click");return true};this.UpdateTextValue=function(){if(this.txtMaxValue!=null&&this.txtMinValue!=null){if(this.txtMinValue.val().length==0&&this.txtMaxValue.val().length==0){this.SetValue()}else{var f="";if(this.unitPrice=="money"){if(this.txtMinValue.val().length>0){var g=GetMoneyText2(parseFloat(this.txtMinValue.val())*1000000);if(this.txtMaxValue.val().length>0){f+=g}else{f+=">= "+g}a("#"+c.lblMin).text(g)}else{a("#"+c.lblMin).text("")}if(this.txtMaxValue.val().length>0){var g=GetMoneyText2(parseFloat(this.txtMaxValue.val())*1000000);if(this.txtMinValue.val().length>0){f+=" - "+g}else{f+="< "+g}a("#"+c.lblMax).text(g)}else{a("#"+c.lblMax).text("")}}else{if(this.unitPrice=="area"){if(this.txtMinValue.val().length>0){if(this.txtMaxValue.val().length>0){f+=this.txtMinValue.val()}else{f+=">= "+this.txtMinValue.val()}}if(this.txtMaxValue.val().length>0){if(this.txtMinValue.val().length>0){f+=" - "+this.txtMaxValue.val()}else{f+="< "+this.txtMaxValue.val()}}f+=" m2"}}this.selectText.children().text(f)}}};this.UpdateOptions=function(f){this.divOptions.children("ul").html(f);this.lstValue=this.divOptions.children("ul").children();this.BindOptionEvent()};this.SetValue=function(g){var f="";if(g!=undefined&&this.divOptions.children("ul").children("[vl="+g+"]").length>0){f=this.divOptions.children("ul").children("[vl="+g+"]").text()}else{f=this.divOptions.children("ul").children(":nth-child(1)").text();g=this.divOptions.children("ul").children(":nth-child(1)").attr("vl")}this.selectText.children().text(f);this.Value.val(g);if(this.txtMaxValue!=null){this.txtMaxValue.val("")}if(this.txtMinValue!=null){this.txtMinValue.val("")}};this.GetValue=function(){return this.Value.val()};this.BindOptionEvent=function(){this.lstValue.bind("click",this,function(f){f.data.Value.val(a(this).attr("vl"));if(f.data.txtMinValue!=null&&f.data.txtMaxValue!=null){f.data.txtMinValue.val("");f.data.txtMaxValue.val("")}f.data.selectText.children().text(a(this).text());f.data.divOptions.css("display","none");if(f.data._ChangeFunc!=null){f.data._ChangeFunc(f.data._ChangeFuncScope)}})};this._ChangeFunc=null;this._ChangeFuncScope=null;this.BindChangeEvent=function(f,g){this._ChangeFunc=g;this._ChangeFuncScope=f};this.BindOptionEvent();return this};AdvanceDropboxCustom.getValueById=function(){};a.fn.AdvanceDropboxCustom=AdvanceDropboxCustom;a.fn.AdvanceDropboxCustom.getValueById=AdvanceDropboxCustom.getValueById}(jQuery));